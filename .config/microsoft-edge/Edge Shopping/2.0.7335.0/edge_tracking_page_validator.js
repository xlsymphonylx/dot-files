!function(){"use strict";var e={d:function(t,o){for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};function t(e){return!e||!e.trim()}e.d({},{d2:function(){return z}});let o=function(e){return e.Opal="Opal",e.Extension="Extension",e.SafariExtension="SafariExtension",e.ChromeExtension="ChromeExtension",e.SafariIOSExtension="SafariIOSExtension",e.Edge="Edge",e.EdgeMobile="EdgeMobile",e.Sapphire="Sapphire",e.RBC="RBC",e.EdgeAndroid="EdgeAndroid",e.EdgeiOS="EdgeiOS",e.EdgeDiscover="EdgeDiscover",e}({});o.EdgeMobile,o.EdgeAndroid,o.EdgeiOS;o.Edge;let r=function(e){return e.ORDERED="Ordered",e.SHIPPED="Shipped",e.DELIVERED="Delivered",e.RETURNED="Returned",e.CANCELED="Canceled",e.ERROR="Error",e}({});new Set(["amazon.com","amazon.ca","amazon.co.uk","amazon.co.jp","alibaba.com"]),new Map(Object.entries({"etsy.com":"receipt_id","target.com":"referenceId","tmall.com":"bizOrderId"}));let i=function(e){return e.DELIVERED_REGEX="(delivered|配達しました|已完成|交易成功)",e.SHIPPED_REGEX="(arriv|(^((?!not).)*ship)|到着|正在出库)",e.RETURNED_REGEX="(return|戻る|返金)",e.CANCELED_REGEX="(cancel|closed|キャンセル|已取消|交易关闭)",e}({});const n="COMPONENT_TO_FOCUS_IN_SHORELINE",s=(Object.keys({"bestbuy.com":{policyDays:15,supportPageUrl:"https://www.bestbuy.com/site/help-topics/price-match-guarantee/pcmcat290300050002.c?id=pcmcat290300050002"},"costco.com":{policyDays:30,supportPageUrl:"https://customerservice.costco.com/app/answers/detail/a_id/628/~/price-adjustment---costco.com-orders",useCartAtPathname:"/checkoutcartdisplayview"},"kohls.com":{policyDays:14,supportPageUrl:"https://cs.kohls.com/app/answers/detail/a_id/90/~/price-match-policy"},"target.com":{policyDays:14,supportPageUrl:"https://help.target.com/help/subcategoryarticle?childcat=Price+Match+Guarantee&parentcat=Policies+%26+Guidelines&searchQuery=search+help",useCartAtPathname:"/cart"},"dickssportinggoods.com":{policyDays:14,supportPageUrl:"https://www.dickssportinggoods.com/s/price-match-policy",useCartAtPathname:"/orderitemdisplay"},"jcpenney.com":{policyDays:14,supportPageUrl:"https://www.jcpenney.com/m/customer-service/our-lowest-price-guarantee"},"macys.com":{policyDays:10,supportPageUrl:"https://customerservice-macys.com/articles/how-can-i-get-a-price-adjustment",useCartAtPathname:"/my-bag",hasCsrError:!0},"ashleyfurniture.com":{policyDays:30,supportPageUrl:"https://www.ashleyfurniture.com/price-match/"},"gap.com":{policyDays:14,supportPageUrl:"https://www.gap.com/customerService/info.do?cid=1192378"},"staples.com":{policyDays:14,supportPageUrl:"https://www.staples.com/sbd/cre/marketing/pmg/index.html"}}),"2.164");let a=null;const p="test-shopping-localstorage";function c(e){let t=null;return function(){try{if(null!==a)return a;"undefined"!=typeof window&&window?.localStorage&&(window.localStorage.setItem(p,p),window.localStorage.getItem(p),window.localStorage.removeItem(p),a=!0)}catch(e){a=!1}return a}()&&(t=window.localStorage.getItem(e)),t}class g{static Sleep(e){return new Promise((t=>setTimeout(t,e)))}static StringifyMap(e,t){return t instanceof Map?{dataType:"Map",value:Array.from(t.entries())}:t}static parseBool(e){return"true"===e||!0===e}static ParseMap(e,t){return"object"==typeof t&&null!==t&&"Map"===t.dataType?new Map(t.value):t}static async WaitForCondition(e,t,o){const r=(new Date).getTime();for(;!await e()&&r+t>(new Date).getTime();)await g.Sleep(o??100);return await e()}static async WaitUntilCondition(e,t){const o=(new Date).getTime();for(;o+t>(new Date).getTime();){if(await e())return!0;await g.Sleep(100)}return!1}static async WaitForSyncCondition(e,t){const o=(new Date).getTime();for(;o+t>(new Date).getTime();){if(e())return!0;await g.Sleep(100)}return!1}static IsValidDataField(e){return null!=e&&e.length>0&&"null"!==e}static IsPageMatch(e,t,o,r){let i=!1;if(g.IsValidDataField(e)&&(i=g.IsOnPage(e,o)),g.IsValidDataField(t))try{!r&&location.href?.toLocaleLowerCase()?.includes(o.toLocaleLowerCase())&&"chrome-untrusted://shopping/"!==location.href&&(r=location.href?.toLocaleLowerCase()),i=g.IsPageRegexMatch(t,r??o)}catch{}return i}static IsPageRegexMatch(e,t){return!!g.IsValidDataField(e)&&new RegExp(e).test(t.toLowerCase())}static IsOnPage(e,t){if(g.IsValidDataField(e)&&t){const o=e.toLowerCase().replace(/\s+/g,"").split(","),r=t.toLowerCase();let i=!1;for(const e of o)if(r.indexOf(e)>=0){i=!0;break}return i}return!1}static ObserveUntil(e,t){const o=new MutationObserver((async()=>{e()&&(o.disconnect(),t())}));o.observe(document.body,{attributeFilter:["offsetWidth","offsetHeight"],childList:!0,subtree:!0})}static async MeasureExecutionTime(e,t){const o=performance.now();return await e(),performance.now()-o}static DeepAssign(e,t){return Object.keys(t).forEach((o=>{if("object"==typeof t[o])e[o]||Object.assign(e,{[o]:{}}),g.DeepAssign(e[o],t[o]);else{let r=t[o];"urlRegex"===o&&"string"==typeof r&&r.endsWith("/")&&(r=r.substring(0,r.length-1)),Object.assign(e,{[o]:r})}})),e}static scrollToModuleIfTargeted(e,t){c(n)===t&&setTimeout((()=>{e?.scrollIntoView({behavior:"smooth",block:"start"}),localStorage.removeItem(n)}),500)}}var l=g;function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function d(e,t,o){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var r=o.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}let u=function(e){return e.sanConfirmationMessage="msShoppingExp0",e.onlineSelectorExtraction="msShoppingExp1",e.couponRedesignExperiment="msShoppingExp2",e.PCDouble="msShoppingExp3",e.PCOutOfStock="msShoppingExp4",e.blossomCampaign="msShoppingExp5",e.newNotificationManagementUI="msShoppingExp6",e.manualCoupon="msShoppingExp9",e.startShoppingRelatedProducts="msShoppingExp11",e.singleScrollingShoreline="msShoppingExp12",e.dealczarBackend="msShoppingExp13",e.sanConsent="msShoppingExp14",e.pcClickoutReverse="msShoppingExp15",e.optionalCheckoutPageUrl="msShoppingExp16",e.domMutationEnabled="msShoppingExp18",e.pdpSelectorExtraction="msShoppingExp19",e.newPriceHistoryGraph="msShoppingExp20",e.closeOnClickAnywhere="msShoppingExp21",e.disableChatChips="msShoppingExp22",e.snoozeWithOptions="msShoppingExp23",e.searchInPane="msShoppingExp24",e.calculatedCutOffPriceFiltering="msShoppingExp25",e.WAPILogs="msShoppingExp27",e.pcbAddressBar="msShoppingExp29",e.shoppingRClient="msShoppingExp30",e.checkoutSkuCashbackEstimation="msShoppingExp31",e.spbInstantAutoActivate="msShoppingExp33",e.productTracking="msShoppingExp34",e.spbAutoDismissTreatment="msShoppingExp35",e.suggestedCouponEnhancement="msShoppingExp36",e.pcboutofflownotification="msShoppingExp38",e.dynamicRanking="msShoppingExp39",e.trendingRecommendations="msShoppingExp40",e.groceryAnonymous="msShoppingExp41",e.spbAutoDismissControl="msShoppingExp42",e.buyingGuideMultiLine="msShoppingExp43",e.spbPdpWithActivated="msShoppingExp44",e.sanConsentStringUpdate="msShoppingExp45",e.spbAutoSnoozeTreatment="msShoppingExp48",e.similarOffers="msShoppingExp49",e.notificationURLTriggerCheck="msShoppingExp51",e.shorelineinboxcoupons="msShoppingExp52",e.spbPdpCashBack="msShoppingExp53",e.intersperseNativeAds="msShoppingExp54",e.sidepaneCashback="msShoppingExp55",e.spbAutoActivationOnSearch="msShoppingExp56",e.contextualCashback="msShoppingExp57",e.startShoppingMomentInTimeModule="msShoppingExp58",e.triviaIcon="msShoppingExp59",e.groceryOffersSearch="msShoppingExp60",e.spbAutoShowFlagTreatmen="msShoppingExp61",e.rewardNotification="msShoppingExp62",e.discoverShopping="msShoppingExp63",e.cpsPDPcontrolFlag="msShoppingExp64",e.spbPDPShortDesign="msShoppingExp65",e.spbCheckoutAutoActivation="msShoppingExp66",e.domMutationExpansion="msShoppingExp67",e.temporalShoppingOnDiscover="msShoppingExp68",e.computeJourneyStage="msShoppingExp69",e.footerExperiments="msShoppingExp70",e.ptIdenticalProducts="msShoppingTestExp9",e.couponsConfidence="msShoppingExp71",e.ProductBestCouponConsent="msShoppingExp72",e.lowCouponExpectationExpansion="msShoppingExp73",e.spbExpiryMicroNotif="msShoppingExp74",e.spbShortNotification="msShoppingExp75",e.chatChipsOrder3="msShoppingExp76",e.spbHomePage="msShoppingExp77",e.enrollToRebateBonus="msShoppingExp78",e.instantAddToCart="msShoppingExp79",e.autoActivateInstantAtc="msShoppingExp80",e.buyingOptionsExperiment="msShoppingExp81",e.searchFeature="msShoppingExp99",e.sustainability="msShoppingExp100",e.startShoppingCategoryAds="msShoppingExp101",e.startShoppingNativeAds="msShoppingExp110",e.incentiveCampaign="msShoppingExp10000",e.pcEMI="msEdgeShoppingExp2000",e.autoOpenControllerScript="msEdgeShoppingAutoOpenControllerScript",e.autoOpenControllerMask="msEdgeShoppingServerSideAutoShow",e.autofillAutoPopup="msAutofillAutoPopup",e.bgaaService="msEdgeShoppingBackgroundAutoApply",e.bgaaUx="msEdgeShoppingBgaaUx",e.bannerShowCoupons="msEdgeShoppingBannerCoupons",e.categoryDeals="msEdgeShoppingPwiloNotificationsCategoryDeals",e.clarity="msEdgeShoppingClarityEnabled",e.clarityWithCookies="msEdgeShoppingClarityEnabledWithCookies",e.clientUrlNavigation="msEdgeShoppingClientUrlNavigation",e.coloredHeader="msShoppingColoredHeader",e.expressCheckout="msEdgeShoppingExpressCheckout",e.expressCheckoutFillDetails="msEdgeShoppingExpressCheckoutFillDetails",e.injectConfirmationScriptUponPurchaseCompletion="msEdgeShoppingAllowInjectConfirmationScriptNextNavigation",e.microNotification="msEdgeShoppingNotifications",e.rebatesSsoFlow="msEdgeShoppingRebatesV2Enroll",e.msWalletBNPL="msWalletBNPL",e.muidNotifications="msEdgeShoppingPwiloNotifications",e.myShopping="msEdgeShoppingMyShopping",e.pcBannerUXExperimentation1="msEdgeShoppingPCBannerUXExperimentation1",e.pcBannerUXExperimentation2="msEdgeShoppingPCBannerUXExperimentation2",e.pcBannerUXExperimentation3="msEdgeShoppingPCBannerUXExperimentation3",e.pcBannerUXExperimentation4="msEdgeShoppingPCBannerUXExperimentation4",e.pcBannerUXExperimentation5="msEdgeShoppingPCBannerUXExperimentation5",e.pcBannerUXExperimentation6="msEdgeShoppingPCBannerUXExperimentation6",e.priceDropNotification="msEdgeShoppingServerNotifications",e.productTrackingOmnibox="msEdgeShoppingProductTracking",e.pwiloOnOpenProcessing="msEdgeShoppingPwiloNotificationsOnOpenProcess",e.rewardFlyout="msEdgeShoppingRewards",e.showAmazonOtherSellers="msEdgeShoppingOtherSeller",e.showNudgeTipsOverlay="msShoppingExpNudge",e.showPaymentOptions="msZipPayVirtualCard",e.showPaymentOptionsOnProductPage="msEdgeShoppingProductFlyoutWallet",e.showProductHistory="msWebAssistQuery",e.showWalletFooter="msEnableWallet",e.signinRebates="msEdgeShoppingRebatesSignUp",e.snoozeAutoshow="msEdgeShoppingAutoShowMuteForFeature",e.socialCoupons="msEdgeShoppingExclusiveCoupons",e.socialCouponsAutoShow="msEdgeShoppingExclusiveCouponsAutoShow",e.rebatesOrganicNew="msEdgeShoppingRebatesAutoShowNewUser",e.paneOpenWithTab1="msEdgeShoppingMainTab1",e.paneOpenWithTab2="msEdgeShoppingMainTab2",e.paneOpenWithTab3="msEdgeShoppingMainTab3",e.axShopping="msEnableAXShoppingNavigation",e.shoppingOnDiscover="msEdgeShoppingOnDiscover",e.pcOfferLevel="msShoppingAutoShowPriceComparisonOfferLevel",e.discoverPdpTopPriority="msDiscoverPdpTopPriority",e.limitPdpNotificationsOnLowStages="msLimitPdpNotificationsOnLowStages",e.clientRequests="msEdgeShoppingGenericDealsService",e.shoppingCohorts="msEdgeShoppingCohorts",e.shoppingCohortsReclaimed="msEdgeShoppingCohortsReclaimed",e.shoppingCohortsVulnerable="msEdgeShoppingCohortsVulnerable",e.shoppingSettingsInPane="msEdgeShoppingSettingsInPane",e.shoppingSettingsInPaneNotificationBottomToggle="msEdgeShoppingSettingsInPaneNotificationBottomToggle",e.edgeShoppingRebatesForAADAccounts="msEdgeShoppingRebatesForAADAccounts",e.shoppingCjkProductUpsell="msEdgeShoppingCJKProductUpsell",e.pcAutoshowAvailable="msEdgeShoppingAutoShowPriceComparisonAvailable",e.travel1="msEdgeShoppingTravel1",e.travel2="msEdgeShoppingTravel2",e.travel3="msEdgeShoppingTravel3",e.travel4="msEdgeShoppingTravel4",e.travel5="msEdgeShoppingTravel5",e.travel6="msEdgeShoppingTravel6",e.settingsPaneNavigateFromFlyout="msEdgeShoppingSettingsInPaneNavigationFromFlyout",e.udaPriceComparison="msShoppingUapiExp41",e.autoApplyRewards="msEdgeShoppingAutoApplyRewards",e.cashbackActivationOmnibar="msEdgeShoppingCashbackActivationFromOmnibar",e.CashbackTabDealDaysOffers="edgeServerUX.shopping.cashbackTabDealDaysOffers",e.CouponsPersonalization="edgeServerUX.shopping.couponsPersonalization",e.BlockingAmazonCoupons="edgeServerUX.shopping.blockingAmazonCoupons",e.DisableSortingCoupons="edgeServerUX.shopping.disableSortingCoupons",e.PhPersonalization="edgeServerUX.shopping.phPersonalization",e.CashbackPersonalization="edgeServerUX.shopping.cashbackPersonalization",e.cashBackDelayedEnrollmentEdgeFlow="edgeServerUX.shopping.cashBackDelayedEnrollmentEdgeFlow",e.cashbackDismissTimeout="edgeServerUX.shopping.msEdgeShoppingCashbackDismissTimeout2s",e.CouponMessageFiltering="edgeServerUX.shopping.couponMessageFiltering",e.inProgressTitleV1="edgeServerUX.shopping.inProgressTitleV1",e.inProgressTitleV2="edgeServerUX.shopping.inProgressTitleV2",e.ServerSideSearchInPane="edgeServerUX.shopping.searchInPane",e.campaign="edgeServerUX.shopping.campaign",e.campaignAwareness="edgeServerUX.shopping.campaignAwareness",e.cbAnimationVar1="edgeServerUX.shopping.cbAnimationVar1",e.cbAnimationVar4="edgeServerUX.shopping.cbAnimationVar4",e.compositeNotificationsPriceHistoryPlusCoupons="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCoupons",e.compositeNotificationsPriceHistoryPlusCouponsV2="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCouponsV2",e.cashbackPdpPlusCouponsNotification="edgeServerUX.shopping.compositeNotificationsCashbackPdpPlusCoupons",e.cashbackPdpPlusCouponsNotificationV2="edgeServerUX.shopping.compositeNotificationsV2UX",e.cashbackPdpPlusPriceDropNotification="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCashback",e.cashbackPdpPlusPriceDropNotificationV2="edgeServerUX.shopping.compositeNotificationsPriceHistoryPlusCashbackV2",e.lowerPricePdpPlusCashbackPlusCoupons="edgeServerUX.shopping.compositeNotificationsLowerPricePdpPlusCashbackPlusCoupons",e.lowerPricePdpPlusCashbackPlusCouponsV2="edgeServerUX.shopping.compositeNotificationsLowerPricePdpPlusCashbackPlusCouponsV2",e.acTrackingToggle="edgeServerUX.shopping.acTrackingToggle",e.ptConciseUi="edgeServerUX.shopping.ptConciseUi",e.BingL2BRQ="edgeServerUX.shopping.BingL2BRQ",e.SeeAllClickout="edgeServerUX.shopping.SeeAllClickout",e.cartExtractionFromBody="edgeServerUX.shopping.cartExtractionFromBody",e.checkoutPageTypeCheck="edgeServerUX.shopping.checkoutPageTypeCheck",e.PTRecentVwd="edgeServerUX.shopping.PTRecentVwd",e.spbAddToCart="edgeServerUX.shopping.addToCartVariation",e.couponRedesignCompressed="edgeServerUX.shopping.couponRedesignCompressed",e.couponRedesignExpanded="edgeServerUX.shopping.couponRedesignExpanded",e.lostUsersCashBack="edgeServerUX.shopping.lostUsersCashback",e.lostUsersCouponClipping="edgeServerUX.shopping.lostUsersCouponClipping",e.lostUsersPriceComparison="edgeServerUX.shopping.lostUsersPriceComparison",e.lostUsersPriceComparisonRegular="edgeServerUX.shopping.lostUsersPriceComparisonRegular",e.inboxSavings="edgeServerUX.shopping.inboxSavings",e.rakutenJPClipping="edgeServerUX.shopping.rakutenJP",e.clippingV2="edgeServerUX.shopping.clippingV2",e.CouponsPipelineV2="shopping.couponsV2Pipeline",e.PTOutOfStockVariations="edgeServerUX.shopping.PTOutOfStockVariations",e.spbSearchAutoActivation="edgeServerUX.shopping.spbSearchAutoActivation",e.postPurchaseTracking="edgeServerUX.shopping.postPurchaseTracking",e.PTEmail="edgeServerUX.shopping.ptEmailConsent",e.pdpStorewideCashbackEstimation="edgeServerUX.shopping.pdpStorewideCashbackEstimation",e.blockLowPerformanceNotifications="edgeServerUX.shopping.blockLowPerformanceNotifications",e.instantAddToCartExperiment="edgeServerUX.shopping.InstantATC",e.pcbAmazonSearch="edgeServerUX.shopping.pcbAmazonSearch",e.suppressAutoApply="edgeServerUX.shopping.suppressAutoApply",e.cbSplitModules="edgeServerUX.shopping.SeparateCashBackModules",e.inboxCouponsAAFailureUpsell="edgeServerUX.shopping.inboxCouponsAAFailureUpsell",e.inboxCouponsAASuccessUpsell="edgeServerUX.shopping.inboxCouponsAASuccessUpsell",e.mobileCashbackModule="edgeServerUX.shopping.mobileCashbackModule",e.mobileProductModules="edgeServerUX.shopping.mobileProductModules",e.suppressAAAutoApplyThreshold="edgeServerUX.shopping.AAAutoApplyFailureThreshold",e.suppressAADomainSuccessThreshold="edgeServerUX.shopping.AADomainSuccessThreshold",e.ptCouponsCashbackNotification="edgeServerUX.shoppping.ptCouponsCashbackNotification",e.journeyStageTelemetry="edgeServerUX.shopping.journeyStageTelemetry",e.revampedPriceComparison="edgeServerUX.shopping.revampedPriceComparison",e.qtCartPageAutoActivation="edgeServerUX.shopping.qtAutoActivation",e.discoverChatChips="edgeServerUX.shopping.discoverChatChips",e.discoverNotification="edgeServerUX.shopping.discoverNotification",e.discoverNotification50="edgeServerUX.shopping.discoverNotification50",e.discoverNotification100="edgeServerUX.shopping.discoverNotification100",e.discoverNotification500="edgeServerUX.shopping.discoverNotification500",e.travelCheaperFlights="edgeServerUX.shopping.travelCheaperFlights",e.travelCheaperFlightsListView="edgeServerUX.shopping.travelCheaperFlightsListView",e.travelExecuteAutoOpenService="edgeServerUX.shopping.travelExecuteAutoOpenService",e.travelIsHotelExperimentActive="edgeServerUX.shopping.travelIsHotelExperimentActive",e.travelRenderCheaperFlightsNotification="edgeServerUX.shopping.travelRenderCheaperFlightsNotification",e.travelForceMarket="edgeServerUX.shopping.travelForceMarket",e.travelCheaperFlightsModule="edgeServerUX.shopping.travelCheaperFlightsModule",e.travelRenderCheaperHotelsNotification="edgeServerUX.shopping.travelRenderCheaperHotelsNotification",e.travelFUxBigSave="edgeServerUX.shopping.travelFUxBigSave",e.travelFUxSmallNotifNpc="edgeServerUX.shopping.travelFUxSmallNotifNpc",e.travelFUxSmallNotifPc="edgeServerUX.shopping.travelFUxSmallNotifPc",e.travelHUxBnDetail="edgeServerUX.shopping.travelHUxBnDetail",e.travelHUxSnNameImage="edgeServerUX.shopping.travelHUxSnNameImage",e.travelHUxSnMinimal="edgeServerUX.shopping.travelHUxSnMinimal",e.pageDetection="edgeServerUX.shopping.pageDetection",e.disableJourneyStageComputation="edgeServerUX.shopping.disableJourneyStageComputation",e.userInsights="edgeServerUX.shopping.userInsights",e.expertInsights="edgeServerUX.shopping.expertInsights",e.communityInsightsPH="edgeServerUX.shopping.communityInsightsPH",e.communityInsightsPC="edgeServerUX.shopping.communityInsightsPC",e.communityInsightsCB="edgeServerUX.shopping.communityInsightsCB",e.shoppingR="edgeServerUX.shopping.shoppingR",e.ptAbandonedCartNotificationToggle="edgeServerUX.shopping.ptAbandonedCartNotificationToggle",e.productSummaryCardEnabled="edgeServerUX.shopping.productSummaryCardTestExp99",e.productSummaryCardEnabledSticky="edgeServerUX.shopping.productSummaryCardStickyTestExp99",e.productSummaryInsights="edgeServerUX.shopping.productSummaryInsightsInShoppingPane",e.cbMerchantAbTesting="edgeServerUX.shopping.merchantAbTesting",e.cbMerchantAbTestingControl="edgeServerUX.shopping.merchantAbTestingCf",e.showSpbOffersOnShorelineOpen="edgeServerUX.shopping.showSpbOffersOnShorelineOpen",e.showSpbOffersOnShorelineOpenV2="edgeServerUX.shopping.showSpbOffersOnShorelineOpenV2",e.aaNoDontShowAgain="edgeServerUX.shopping.aaNoDontShowAgain",e.aaEarlyReturn="edgeServerUX.shopping.aaEarlyReturn",e.articlesCashbackNotification="edgeServerUX.shopping.artCashNotif",e.suppressLowCTR="edgeServerUX.shopping.suppressLowCTR",e.couponBackgroundDarkCode="edgeServerUX.shopping.couponBackgroundDarkCode",e.couponBackgroundLightCode="edgeServerUX.shopping.couponBackgroundLightCode",e.couponLightCode="edgeServerUX.shopping.couponLightCode",e.couponDarkCode="edgeServerUX.shopping.couponDarkCode",e.cashbackEUMarkets="edgeServerUX.shopping.cashbackEUMarkets",e.autoSuppressNegativeBGAA="edgeServerUX.shopping.autoSupperssNegativeBGAA",e.bgaaNoSnoozeTime="edgeServerUX.shopping.bgaaNoSnoozeTime",e.newHeader="edgeServerUX.shopping.newHeader",e.loggingThrottle="edgeServerUX.shopping.loggingThrottle",e.sellerIconCovIncr="edgeServerUX.shopping.sellerIconCovIncr",e.pcSeeMore="edgeServerUX.shopping.pcSeeMore",e.priceCompareV2="edgeServerUX.shopping.priceCompareV2",e.pcNotificationCashbackV2="edgeServerUX.shopping.pcNotifCbV2",e.couponValidityFix="edgeServerUX.shopping.couponValidityFix",e.domMutationReverseFlight="domMutationReverseFlight",e.fragmentPageTypeFiltering="edgeServerUX.shopping.fragmentPageTypeFiltering",e.cashbackConsolidationExp="edgeServerUX.shopping.cashbackRefactor_v4",e.collectAllFragments="edgeServerUX.shopping.collectAllFragments",e.disablePageTypeCollectionForFragments="edgeServerUX.shopping.disablePageTypeCollectionForFragments",e.suppressedCoupons="edgeServerUX.shopping.suppressedCoupons",e.autoShowNotificationForAmazonWarehouseSellers="edgeServerUX.shopping.AutoShowNotificationAmazonWarehouseSeller",e.pcAutoshowExpanded="edgeServerUX.shopping.pcAutoshowExpanded",e.pcNotificationButtonText="edgeServerUX.shopping.pcNotificationButtonText",e.pcCloseSnooze="edgeServerUX.shopping.pcCloseSnooze",e.newCouponStringsT1="edgeServerUX.shopping.newCouponStringsT1",e.newCouponStringsT2="edgeServerUX.shopping.newCouponStringsT2",e.AARewardString="edgeServerUX.shopping.AARewardString",e.cashbackCloseSnooze="edgeServerUX.shopping.cashbackCloseSnooze",e.phCloseSnooze="edgeServerUX.shopping.phCloseSnooze",e.clipCloseSnooze="edgeServerUX.shopping.clipCloseSnooze",e.aaCloseSnooze="edgeServerUX.shopping.aaCloseSnooze",e.disableWebComponentCoupon="edgeServerUX.shopping.disableWebComponentCoupon",e.disableNotificationForSimilarSellers="edgeServerUX.shopping.DisableNotificationSimilarSeller",e.disableCashbackOrganicNotification="edgeServerUX.shopping.disableCashbackOrganicNotification",e.disableSPBNotification="edgeServerUX.shopping.disableSPBNotification",e.spbOffersSearch="edgeServerUX.shopping.authoShowSpbT",e.shorelineUAPIBackfill="edgeServerUX.shopping.shorelineUAPIBackfill",e.spbDismissTimeout="edgeServerUX.shopping.spbDismissTimeout",e.spbCloseSnooze="edgeServerUX.shopping.spbCloseSnooze",e.purchaseExtractionRefactor="edgeServerUX.shopping.purchaseExtractionRefactor",e.fixCartUpdate="edgeServerUX.shopping.fixCartUpdate",e.buyingOptions="edgeServerUX.shopping.buyingOptions",e.ptOutOfStock="edgeServerUX.shopping.ptOutOfStock",e.pcbStorewideUXDesignChange="edgeServerUX.shopping.pcbStorewideUXDesignChangev3",e.personalizePromotionNewUser="edgeServerUX.shopping.ppNewUser",e.reenableProductBestCoupon="edgeServerUX.shopping.reenableProductBestCoupon",e.reenableProductBestCouponSearchPage="edgeServerUX.shopping.reenableProductBestCouponSearchPage",e.pdpRerank="edgeServerUX.shopping.pdpRerank",e.ptNotifications="edgeServerUX.shopping.ptNotifications",e.improvedCartModelCouponCoverage="edgeServerUX.shopping.improvedCartModelCouponCoverage",e.aaWaitForBlockedCoupons="edgeServerUX.shopping.aaWaitForBlockedCoupons",e.onlyShowAANotificationWithEligibleCoupons="edgeServerUX.shopping.onlyShowAANotificationWithEligibleCoupons",e.delayForAAEligibleCouponsCheck="edgeServerUX.shopping.delayForAAEligibleCouponsCheck",e.storewideRangeCashback="edgeServerUX.shopping.storewideRangeCashback",e.autoOpenPaneScenariosActive="edgeServerUX.shopping.autoOpenPaneScenariosActive",e.autoOpenPaneDismissTime="edgeServerUX.shopping.autoOpenPaneDismissTime",e.enablePurchaseDetectionRewardsAPI="edgeServerUX.shopping.enablePurchaseDetectionRewardsAPI",e.enableCashbackCampaignEmail="edgeServerUX.shopping.enableCashbackCampaignEmail",e.enablePostPurchaseMessage="edgeServerUX.shopping.enablePostPurchaseMessage",e.sendNativePurchaseDetectionSignal="edgeServerUX.shopping.sendNativePurchaseDetectionSignal",e.disableAllFlights="edgeServerUX.shopping.disableAllFlights",e.triggerServiceForPdp="edgeServerUX.shopping.triggerServiceForPdp",e.triggerServiceForRetailer="edgeServerUX.shopping.triggerServiceForRetailer",e.shorelinerefreshredesign="edgeServerUX.shopping.shorelinerefreshredesign",e.fetchRewardOfferDuringAA="edgeServerUX.shopping.fetchRewardOfferDuringAA",e.disableConfirmationNotifications="edgeServerUX.shopping.disableConfirmationNotifications",e.logAggregatorData="edgeServerUX.shopping.logAggregatorData",e.disablefeed="edgeServerUX.shopping.disablefeed",e.enableLoadingSpinnerLabelsRotation="edgeServerUX.shopping.enableLoadingSpinnerLabelsRotation",e.loadingSpinnerRotationTimeInMS="edgeServerUX.shopping.loadingSpinnerRotationTimeInMS",e.serverSideLocalization="edgeServerUX.shopping.serverSideLocalization",e.couponClippingExpansion="edgeServerUX.shopping.couponClippingExpansion",e.disableZeroSuccessRateCouponShuffling="edgeServerUX.shopping.disableZeroSuccessRateCouponShuffling",e.enableAffiliateActivationStatusUpdate="edgeServerUX.shopping.enableAffiliateActivationStatusUpdate",e.pricehistoryWC="edgeServerUX.shopping.pricehistoryWC",e.autoApplyRewardsOverlay="edgeServerUX.shopping.autoApplyRewardsOverlay",e.shorelineRevamp="edgeServerUX.shopping.shorelineRevamp",e}({});let S=function(e){return e.msShoppingTestExp1="msShoppingTestExp1",e.msShoppingTestExp2="msShoppingTestExp2",e.msShoppingTestExp3="msShoppingTestExp3",e.msShoppingTestExp4="msShoppingTestExp4",e.msShoppingTestExp5="msShoppingTestExp5",e.msShoppingTestExp6="msShoppingTestExp6",e.msShoppingTestExp7="msShoppingTestExp7",e.msShoppingTestExp8="msShoppingTestExp8",e.msShoppingTestExp9="msShoppingTestExp9",e.msShoppingTestExp10="msShoppingTestExp10",e.msShoppingTestExp11="msShoppingTestExp11",e.msShoppingTestExp12="msShoppingTestExp12",e.msShoppingTestExp13="msShoppingTestExp13",e.msShoppingTestExp14="msShoppingTestExp14",e.msShoppingTestExp15="msShoppingTestExp15",e.msShoppingTestExp16="msShoppingTestExp16",e.msShoppingTestExp17="msShoppingTestExp17",e.msShoppingTestExp18="msShoppingTestExp18",e.msShoppingTestExp99="msShoppingTestExp99",e}({});const m=new class{constructor(){d(this,"experiments",new Map),d(this,"serviceExperiments",new Map),d(this,"experimentsSet",new Set),d(this,"serviceExperimentsSet",new Set),d(this,"enablePCBannerUX",!1),d(this,"expRawData",void 0),d(this,"serviceFeatures",void 0),d(this,"rawEnabledFeatures",void 0),d(this,"rawEnabledServiceFeatures",void 0)}Create(e,t){this.experiments=new Map,this.serviceExperiments=new Map,this.experimentsSet=new Set,this.serviceExperimentsSet=new Set,"string"==typeof e?this.CreateFromJsonStr(e):this.CreateClientFeatures(e),t&&("string"==typeof t?this.CreateServiceFeaturesFromJsonStr(t):this.CreateServiceFeaturesFromJsonObj(t)),this.rawEnabledFeatures=e,this.rawEnabledServiceFeatures=t}GetEnabledFeaturesMap(){return this.experiments??new Map}GetExpRawData(){return this.expRawData}GetRawEnabledFeatures(){return this.rawEnabledFeatures}GetRawEnabledServiceFeatures(){return this.rawEnabledServiceFeatures}GetServiceExperiments(){return this.serviceFeatures}isExperimentActive(e){return!this.experimentsSet.has(u.disableAllFlights)&&!this.serviceExperimentsSet.has(u.disableAllFlights)&&(this.experimentsSet.has(e)||this.serviceExperimentsSet.has(e))}getServiceExperimentValue(e){return this.serviceExperiments.get(e)?.value}getServiceExperimentParams(e){return this.serviceExperiments.get(e)?.params}isTestFlagActive(e){return this.experimentsSet.has(e.toString())||this.serviceExperimentsSet.has(e.toString())}setShowPCBannerUX(e,t,o,r){this.enablePCBannerUX=void 0!==e&&e||void 0!==t&&t&&void 0!==o&&o.CompetingPrices&&o.CompetingPrices.length>0&&void 0!==r&&r}isPCBannerUXExperimentActive(){return(this.experimentsSet.has(u.pcBannerUXExperimentation1)||this.experimentsSet.has(u.pcBannerUXExperimentation2)||this.experimentsSet.has(u.pcBannerUXExperimentation3)||this.experimentsSet.has(u.pcBannerUXExperimentation4)||this.experimentsSet.has(u.pcBannerUXExperimentation5)||this.experimentsSet.has(u.pcBannerUXExperimentation6))&&this.enablePCBannerUX}newFlyoutHeaderActive(){return this.experimentsSet.has(u.newHeader)}isVariantActive(e,t){return!!this.isExperimentActive(e)&&this.experiments.get(e)?.variant===t}isMultipleVariantActive(e,t,o){if(this.isExperimentActive(e)){const r=this.experiments.get(e);if(!r)return!1;if(r.variant===o)return!0;if(r.multipleVariants&&r.multipleVariants.length>0&&-1!==r.multipleVariants.findIndex((e=>e.key===t&&e.value===o)))return!0}return!1}getVariantValue(e,o,r){return parseInt(e.find((e=>e.key===o&&("number"==typeof e.value||!t(e.value))))?.value??r.toString(),void 0)}getVariantStringValue(e,o,r){return e.find((e=>e.key===o&&!t(e.value)))?.value??r}getMultipleVariants(e){return this.isExperimentActive(e)?this.experiments.get(e)?.multipleVariants??[]:[]}getVariantName(e){const t=this.experiments.get(e);if(this.isExperimentActive(e)&&t&&t.variant)return t.variant}createServiceFeaturesFromMap(e){const t=new Map;e&&e.length>0&&e.forEach((e=>{const o=new class{constructor(){d(this,"value",void 0),d(this,"params",void 0)}},r=e[0];"object"==typeof e[1]?(o.value=e[1].value?.toString(),o.params=new Map(Object.entries(e[1].params))):(o.value=e[1],o.params=new Map),"false"!==o.value&&(t.set(r,o),this.serviceExperimentsSet.add(r))})),this.serviceExperiments=t}CreateClientFeatures(e){this.expRawData=e;const t=new Map;if(e&&e.length>0){const o=Object.values(u),r=Object.values(S);e.forEach((e=>{const i=new class{constructor(){d(this,"name",void 0),d(this,"supported",void 0),d(this,"variant",void 0),d(this,"multipleVariants",void 0)}};i.name=e.name,i.supported=!1,e.params?.length>1?i.multipleVariants=e.params:e.params?.length>0&&(i.variant=e.params[0].value),(o.includes(e.name)||r.includes(e.name))&&(1===e.params?.length&&!1===e.params[0]?i.supported=!1:(i.supported=!0,this.experimentsSet.add(e.name))),t.set(i.name,i)}))}this.experiments=t}CreateFromJsonStr(e){try{if(e){const t=JSON.parse(e);this.CreateClientFeatures(t)}}catch(e){}}CreateServiceFeaturesFromJsonStr(e){if(!e)return;const t=JSON.parse(e);this.CreateServiceFeaturesFromJsonObj(t)}CreateServiceFeaturesFromJsonObj(e){e&&(this.serviceFeatures=e,this.createServiceFeaturesFromMap(Object.entries(e)))}},E=new class{constructor(){d(this,"appName",void 0),this.appName=o.Edge}SetAppName(e){this.appName=e}GetAppName(){return this.appName}};class v{static GetBuildVersion(){try{const e=navigator.userAgent.match(/Edg(?:A|iOS)?\/([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)/);if(e&&2===e.length)return e[1];throw Error("Invalid build version.")}catch(e){}}static IsBuildVersionSupported(e){const t=v.GetBuildVersion();if(void 0===t)return!1;const o=v.CompareBuildVersions(t,e);return void 0!==o&&o>=0}static CompareBuildVersions(e,t){if(e&&t){const o=e.split("."),r=t.split(".");if(4!==o.length||4!==r.length)return;for(let e=0;e<4;e++){const t=parseInt(o[e],10),i=parseInt(r[e],10);if(isNaN(t)||isNaN(i))return;if(t>i)return 1;if(i>t)return-1}return 0}}static IsOtherSellersExpActive(e){return"walmart.com"===e||m.isExperimentActive(u.showAmazonOtherSellers)}static GetClientName(){try{if(-1!==navigator.userAgent.toLowerCase().indexOf("android"))return o.EdgeAndroid;if(/iPad|iPhone|iPod/.test(navigator.userAgent))return o.EdgeiOS}catch(e){throw Error("Error getting client name")}return E.GetAppName()}static IsMobile(){return[o.EdgeAndroid,o.EdgeiOS].includes(v.GetClientName())}}d(v,"enabledServiceFlights","");var C=v;function f(){return function(e){if(!e)return"";const t=e.toLowerCase().match(/(w){3}.?\./);return t&&null!=t.index&&t[0]?e.substring(t.index+t[0].length):e}(window.location.hostname)}function A(){return window.location.toString()}new Set(["₹","￡","€","¥","￥","₽","元","₩","₱","đ","₫","฿","US$","CA$","CL$","AU$","MX$","MXN$","C$","A$","R$","NZ$","COL$","NT$","£E","SG$","zł","S$","AR$","$","£","USD","INR","GBP","CAD","EUR","AUD","JPY","BRL","MXN","NZD","CNY","KRW","RUB","IDR","PHP","VND","THB","TWD","EGP","DKK","SEK","RM","MYR","AMD","CHF","PLN","NOK","SGD","CZK","TL","TRY","COP","ZAR","CLP","SAR","AED","Rp","dr.","Fr.","Kč","Rs","kr.","kr","R","円","Rs","HUF","HK$","руб","₪","JMD","lei","UAH","DOP","XAF","XOF","KWD","AWG","CFP","BGN","BAM","KZT","MAD","BOB","GEL","JOD","QAR","XCD","MNT","TND","NGN","BDT","S/","MDL","MZN","PKR","LAK","BWP","OMR","CRC","DZD","KES","LKR"]),new Map([["en-us","$"],["en-gb","£"],["en-ca","CA$"],["en-au","AU$"],["en-in","₹"],["fr-fr","€"],["de-de","€"],["ja-jp","¥"],["it-it","€"],["nl-nl","€"],["es-es","€"],["en-nz","NZ$"],["pt-br","R$"],["zh-cn","元"],["es-mx","MX$"],["ko-kr"," ₩"],["ru-ru","₽"],["id-id","Rp"],["fil-ph","₱"],["vi-vn","đ"],["th-th","฿"],["zh-tw","NT$"],["ar-eg","EGP"],["de-at","€"],["da-dk","kr."],["de-ch","Fr."],["pl-pl","zł"],["sv-se","kr"],["en-my","RM"],["no-no","NOK"],["en-sg","S$"],["fi-fi","€"],["fr-be","€"],["cs-cz","Kč"],["tr-tr","TL"],["es-co","COL$"],["en-za","R"],["en-sa","SAR"],["en-eg","EGP"],["ar-ae","AED"],["es-ar","AR$"]]),new Set(["USD","INR","GBP","EUR","NZD","BRL","CAD","AUD","JPY","CNY","MXN","KRW","RUB","IDR","PHP","VND","THB","TWD","EGP","DKK","CHF","PLN","SEK","MYR","NOK","SGD","CZK","TRY","COP","ZAR","CLP","SAR","AED","ARS"]),new Map([["$","USD"],["₹","INR"],["Rs","INR"],["£","GBP"],["€","EUR"],["NZ$","NZD"],["R$","BRL"],["CA$","CAD"],["C$","CAD"],["A$","AUD"],["AU$","AUD"],["¥","JPY"],["￥","JPY"],["円","JPY"],["元","CNY"],["MX$","MXN"],["MXN$","MXN"],["￡","GBP"],["₩","KRW"],["₽","RUB"],["Rp","IDR"],["₱","PHP"],["đ","VND"],["₫","VND"],["฿","THB"],["NT$","TWD"],["EGP","EGP"],["kr.","DKK"],["Fr.","CHF"],["zł","PLN"],["dr.","SEK"],["RM","MYR"],["NOK","NOK"],["S$","SGD"],["Kč","CZK"],["TL","TRY"],["COL$","COP"],["R","ZAR"],["kr","DKK"],["SG$","SGD"],["SAR","SAR"],["AED","AED"],["AMD","AMD"],["AR$","ARS"]]),new Map([["USD","$"],["INR","₹"],["GBP","£"],["EUR","€"],["NZD","NZ$"],["BRL","R$"],["CAD","CA$"],["AUD","AU$"],["JPY","¥"],["CNY","元"],["MXN","MX$"],["GBP","￡"],["KRW","₩"],["RUB","₽"],["IDR","Rp"],["PHP","₱"],["VND","đ"],["THB","฿"],["TWD","NT$"],["EGP","EGP"],["DKK","kr."],["CHF","Fr."],["PLN","zł"],["SEK","dr."],["MYR","RM"],["NOK","NOK"],["SGD","S$"],["CZK","Kč"],["TRY","TL"],["COP","COL$"],["ZAR","R"],["SAR","SAR"],["AED","AED"],["ARS","AR$"]]);class b extends Error{constructor(e){super(e),Object.setPrototypeOf(this,b.prototype)}}class P{static HasVisibleElement(e){return P.CountVisibleElements(e)>0}static CountVisibleElements(e){if(!l.IsValidDataField(e))return 0;const t=e.split(";");for(const e of t){const t=P.CountVisibleElementsSingleSel(e);if(t>0)return t}return 0}static RunQuerySelectorAll(e,t){if(!l.IsValidDataField(e))return[];const o=(e=e.replace(/;/g,",")).split("<");let r;r=t?t.querySelectorAll(o[0]):document.querySelectorAll(o[0]);for(const e of o.slice(1)){const t=r[0]?.shadowRoot;if(!t)return[];r=t.querySelectorAll(e)}return r}static IsElementVisible(e){return e&&e.offsetWidth>0&&e.offsetHeight>0}static GetFirstVisibleElement(e,t){if(!l.IsValidDataField(e))return;const o=e.split(";");for(const e of o)try{const o=P.RunQuerySelectorAll(e,t);for(const e of o)if(P.IsElementVisible(e))return e}catch(e){}}static GetAllVisibleElements(e){if(!l.IsValidDataField(e))return[];const t=e.split(";"),o=[];for(const e of t){const t=P.RunQuerySelectorAll(e);for(const e of t)P.IsElementVisible(e)&&o.push(e)}return o}static GetTextValue(e,t){if(!e||!l.IsValidDataField(e))return"";const o=e.split(";"),r=o[0],i=P.GetFirstVisibleElement(r,t);if(!i)return"";let n=i,s=n.innerText;if(1===o.length)n=P.NormalizeIfSuperscripted(i),s=n.innerText;else{const e=n.cloneNode(!0);let i=o[1];const a=P.GetFirstVisibleElement(i,n)??P.GetFirstVisibleElement(i,t);let p="";if(a&&a.innerText){if(p="."+a.innerText,n.contains(a)){const t=P.GetFirstMatchingElement(i,e);if(t?.innerText)e.removeChild(t);else{i.startsWith(r)&&(i=i.slice(r.length));const t=this.GetFirstMatchingElement(i,e);t?.innerText&&e.removeChild(t)}s=e?.innerText?e.innerText:s}s+=p}if(o.length>2){for(const t of o.slice(2)){const o=this.GetFirstMatchingElement(t,e);o?.innerText&&e.removeChild(o)}s=e?.innerText?e.innerText:s}s+=p}return P.StripInvalidJSONCharacters(s)}static GetItemizedData(e,t,o){let r="";if(e&&""!==e){const i=P.RunQuerySelectorAll(e,o);for(const e of i)e&&e.textContent&&(r+=e.textContent?.trim()+t)}return r}static StripInvalidJSONCharacters(e){return e.replace(/\n/gi,"")}static NormalizeIfSuperscripted(e){if(e&&e.innerHTML&&e.innerHTML.toLowerCase().indexOf("</sup>")>-1)try{const t=e.cloneNode(!0),o=t.childNodes.length;for(let e=0;e<o;e++){const o=t.childNodes[e];if("SUP"===o.tagName){let e=o.innerText;const r=/[0-9\.]+/g.exec(e);if(null!==r)return e="."+r[0],o.innerText=e,t}}}catch(t){return e}return e}static GetFirstMatchingElement(e,t){if(!l.IsValidDataField(e))return;const o=e.split(";");for(const e of o){const o=P.RunQuerySelectorAll(e,t);for(const e of o)if(e)return e}}static GetAllMatchingElements(e){if(!l.IsValidDataField(e))return[];const t=e.split(";"),o=[];for(const e of t)try{const t=P.RunQuerySelectorAll(e);for(const e of t)e&&o.push(e)}catch(e){}return o}static CountVisibleElementsSingleSel(e){if(!l.IsValidDataField(e))return 0;const t=P.RunQuerySelectorAll(e);let o=0;for(const e of t)P.IsElementVisible(e)&&o++;return o}}var x=P,R=class{constructor(){d(this,"orderDate",void 0),d(this,"totalCost",void 0),d(this,"orderNumber",void 0),d(this,"orderDetailsPage",void 0),d(this,"listOfProducts",void 0),d(this,"orderStatus",void 0),d(this,"orderSummary",void 0),d(this,"trackPackageButtonSelector",void 0)}};class U{constructor(){d(this,"email",void 0),d(this,"orderNumber",void 0),d(this,"phoneNumber",void 0),d(this,"trackingUrl",void 0)}static create(e){const t=new U;return e&&(t.email=e.email,t.orderNumber=e.orderNumber,t.phoneNumber=e.phoneNumber,t.trackingUrl=e.trackingUrl),t}}var N=U;class T{constructor(){d(this,"productImageSelector",void 0),d(this,"productUrlSelector",void 0)}static create(e){const t=new T;return e&&(t.productImageSelector=e.productImageSelector,t.productUrlSelector=e.productUrlSelector),t}}var D=T;class w{constructor(){d(this,"trackPackageButtonSelector",void 0),d(this,"orderSummarySelector",void 0),d(this,"productContainerSelector",void 0),d(this,"productContentSelector",void 0)}static create(e){const t=new w;if(e){t.trackPackageButtonSelector=e.trackPackageButtonSelector,t.orderSummarySelector=e.orderSummarySelector,t.productContainerSelector=e.productContainerSelector;const o=e.productContentSelector;o&&(t.productContentSelector=D.create(o))}return t}}var O=w;class y{constructor(){d(this,"orderDateSelector",void 0),d(this,"totalCostSelector",void 0),d(this,"orderNumberSelector",void 0),d(this,"orderDetailsPageSelector",void 0),d(this,"shipmentContainerSelector",void 0),d(this,"shipmentContentSelector",void 0)}static create(e){const t=new y;if(e){t.orderDateSelector=e.orderDateSelector,t.totalCostSelector=e.totalCostSelector,t.orderNumberSelector=e.orderNumberSelector,t.orderDetailsPageSelector=e.orderDetailsPageSelector,t.shipmentContainerSelector=e.shipmentContainerSelector;const o=e.shipmentContentSelector;o&&(t.shipmentContentSelector=O.create(o))}return t}}var X=y;class k{constructor(){d(this,"trackingUrl",void 0),d(this,"clickToOpenOrderSelector",void 0),d(this,"orderContainerSelector",void 0),d(this,"orderContentSelector",void 0)}static create(e){const t=new k;if(e){t.trackingUrl=e.trackingUrl,t.clickToOpenOrderSelector=e.clickToOpenOrderSelector,t.orderContainerSelector=e.orderContainerSelector;const o=e.orderContentSelector;o&&(t.orderContentSelector=X.create(o))}return t}}var I=k;class F{constructor(){d(this,"impressionId",void 0),d(this,"domain",void 0),d(this,"packageTrackingSelectors",void 0)}static create(e){const t=new F;if(e){t.impressionId=e.impressionId,t.domain=e.domain??f();const o=e.packageTrackingSelectors;o&&(t.packageTrackingSelectors=o.map((e=>I.create(e))))}return t}}var M=F,B=class{constructor(){d(this,"productImageUrl",void 0),d(this,"productName",void 0),d(this,"productUrl",void 0)}};class V{initialize(e){e.splice(0,2);try{this.initializeRuntime(e)}catch(e){return!1}return!0}raiseMessageFromHost(e){const t=e.shift();if(t)try{this.handleMessages(e,t)}catch(e){}}postMessageToHost(e,t){try{this.getNativeHandler().sendMessageToHost(e,t)}catch(e){}}}const _=new class extends V{initializeRuntime(e){throw new Error("This should never be called.")}handleMessages(e,t){if("GetTrackingPageData"===t)try{"interactive"===document.readyState||"complete"===document.readyState?window.getTrackingPageData(e):window.addEventListener&&window.addEventListener("DOMContentLoaded",(t=>{window.checkAndGetTrackingPageData(e)}))}catch(e){}}getNativeHandler(){return trackingPageValidatorNativeHandler}};class L{static getTextContentFromHtmlElement(e){if(!e)return"";if(e.hasChildNodes()){let t="";for(const o of e.childNodes)if(o.nodeType===Node.TEXT_NODE&&o.textContent){const e=o.textContent.trim();e&&(t+=e)}if(t)return t}const t=e.textContent||e.innerText;return t?t.trim():""}static getOrderStatusFromTextInput(e){if(!e)return r.ERROR;const t="i";return new RegExp(i.DELIVERED_REGEX,t).test(e)?r.DELIVERED:new RegExp(i.SHIPPED_REGEX,t).test(e)?r.SHIPPED:new RegExp(i.RETURNED_REGEX,t).test(e)?r.RETURNED:new RegExp(i.CANCELED_REGEX,t).test(e)?r.CANCELED:r.ORDERED}static isExpiredDeliveryDate(e){if(e&&e.toLowerCase().includes("cancel"))return z.CANCELED_ORDER;const t=this.getOrderStatusFromTextInput(e),o=t===r.ERROR||t===r.SHIPPED||t===r.ORDERED;if(!e||isNaN(Date.parse(e))||o)return!1;const i=e.match(/\d{4}$/gs);null!=i&&0!==i.length||(e+=" "+(new Date).getFullYear());const n=new Date(Date.parse(e));return(Date.now()-n.getTime())/864e5>2&&z.EXPIRED_DELIVERY_DATE}static getOrderDateForSpecialWebsites(e,t){const o=L.getTextContentFromHtmlElement(t);switch(e){case"etsy.com":if(o.startsWith("On")||o.startsWith("on"))return o.substring(2).trim();break;case"alibaba.com":if(o.startsWith("|"))return o.substring(1).trim()}return o}static getOrderDetailsPageForSpecialWebsites(e,t){return"walmart.com"===e.domain?`${e.domain}/orders/${t}`:""}static getOrderNumberForSpecialWebsites(e,t){const o=L.getTextContentFromHtmlElement(t);switch(e){case"etsy.com":if(t)return t.getAttribute("data-receipt-id")??"";break;case"walmart.com":return L.getFirstRegexMatchOrDefaultString(o,/(?<=Order#\s\s*).*?(?=\s*(\|\sTotal))/gs);default:return o.startsWith("#")?o.substring(1).trim():o}return""}static getTotalCostForSpecialWebsites(e,t){switch(e){case"walmart.com":return L.getFirstRegexMatchOrDefaultString(t,/(?<=Total\s\$\s*)\d+\.\d+/gs);case"ebay.com":return L.getFirstRegexMatchOrDefaultString(t,/(?<=\$)\d+\.\d+/gs);default:return t}}static getFirstRegexMatchOrDefaultString(e,t){const o=e.match(t);return null!=o&&o.length>0?o[0]:e}static getHrefFromHtmlElement(e){return e?e.getAttribute("href"):""}}var G=L;let H=function(e){return e.INVALID_TRACKING_PAGE_ERROR="InvalidTrackingPageError",e.TRACKING_PAGE_DATA="TrackingPageData",e.TRACKING_PAGE_ERROR="TrackingPageError",e.TRACKING_PAGE_PARSING_ERROR="TrackingPageParsingError",e.TRACKING_PAGE_SCRIPT_ERROR="TrackingPageScriptError",e}({}),z=function(e){return e.NO_ORDER_CONTAINER_SELECTOR="orderContainerSelector is null",e.NO_ORDER_CONTAINERS="No order containers found",e.NO_SHIPMENT_CONTAINER_SELECTOR="shipmentContainerSelector is null",e.NO_ORDER_NUMBER="No order number found",e.NOT_ORDER_TO_EXTRACT="Not the order to extract",e.NO_ORDER_DATE="No order date found",e.NOT_VALID_ORDER_FOR_TRACKING_PAGE_FRE="Not a valid order for tracking page FRE",e.NO_SHIPMENT_CONTAINERS="No shipment containers found",e.CANCELED_ORDER="Order is canceled",e.EXPIRED_DELIVERY_DATE="Expired delivery date",e.NO_PRODUCT_CONTAINERS="No product containers found",e.INVALID_PRODUCT_DETAILS="Invalid product details",e}({}),$="",W=!1,K="",j=[];async function J(e){let o="";try{$=e[2],W="true"===e[3].toLowerCase(),K="",j=[];const r=JSON.parse(e[0]),i=M.create(r),n=JSON.parse(e[1]),s=n?n.filter((e=>!t(e?.orderNumber??""))).map((e=>N.create(e))):[];o=i?.impressionId??"",await l.WaitForCondition((async()=>function(e){const t=e?.packageTrackingSelectors;if(!t)throw new b("Empty or null package tracking selectors");const o=A();let r=!1;for(const e of t)if(e.trackingUrl&&o.includes(e.trackingUrl)){r=!0;break}if(!r)throw new b("Invalid Order Page URL");return!0}(i)),5e3).then((async()=>{await async function(e,o,r){let i=new Set;r?.length&&(i=new Set(r.map((e=>e.orderNumber))));const n=await async function(e,o){const r=[],i=e?.packageTrackingSelectors;if(!i)return r;for(const n of i){const i=n?.clickToOpenOrderSelector??"";if(!t(i)){const t=x.RunQuerySelectorAll(i),o=new Promise((e=>{const t=new MutationObserver((()=>{}));t.observe(document,{attributes:!0,childList:!0,subtree:!0}),setTimeout((()=>{t.disconnect(),e()}),1500)}));let r="homedepot.com"===e?.domain?1:0;for(;r<t.length;r++)t[r].click();await o}const s=n?.orderContainerSelector??"";if(t(s)){j.push(z.NO_ORDER_CONTAINER_SELECTOR);continue}const a=x.RunQuerySelectorAll(s);if(a?.length)for(const i of a){const s=n?.orderContentSelector?.shipmentContainerSelector;if(!s){j.push(z.NO_SHIPMENT_CONTAINER_SELECTOR);continue}const a=n?.orderContentSelector?.orderNumberSelector??"DUMMY_SELECTOR",p=i.querySelector(a),c=G.getOrderNumberForSpecialWebsites(e?.domain,p??i);if(t(c)){j.push(z.NO_ORDER_NUMBER);continue}if(o?.size>0&&!o?.has(c)){j.push(z.NOT_ORDER_TO_EXTRACT);continue}const g=n?.orderContentSelector?.orderDateSelector,l=g?i.querySelector(g):null,h=G.getOrderDateForSpecialWebsites(e?.domain,l);if(!Y(h))continue;const d=n?.orderContentSelector?.totalCostSelector,u=d?i.querySelector(d):null,S=G.getTextContentFromHtmlElement(u),m=G.getTotalCostForSpecialWebsites(e?.domain,S),E=n?.orderContentSelector?.orderDetailsPageSelector,v=E?i.querySelector(E):null,C=v?G.getHrefFromHtmlElement(v):G.getOrderDetailsPageForSpecialWebsites(e,c),f=i.querySelectorAll(s);if(f?.length)for(const e of f){const o=[],i=n?.orderContentSelector?.shipmentContentSelector,s=i?.trackPackageButtonSelector??"",a=i?.orderSummarySelector,p=i?.productContainerSelector??"",g=a?e.querySelector(a):null,l=G.getTextContentFromHtmlElement(g),d=G.isExpiredDeliveryDate(l);if(d===z.CANCELED_ORDER||d===z.EXPIRED_DELIVERY_DATE){j.push(d);continue}const u=G.getOrderStatusFromTextInput(l),S=e.querySelectorAll(p);if(!S?.length){j.push(z.NO_PRODUCT_CONTAINERS);continue}for(const e of S){const r=i?.productContentSelector,n=r?.productImageSelector,s=r?.productUrlSelector,a=n?e.querySelector(n):null,p=a?.src??"",c=s?e.querySelector(s):null,g=Z(c,a);if(t(p)&&t(g)){j.push(z.INVALID_PRODUCT_DETAILS);continue}const l=Object.assign(new B,{productImageUrl:p,productName:g,productUrl:G.getHrefFromHtmlElement(c)});o.push(l)}if(!o?.length)continue;const E=Object.assign(new R,{listOfProducts:o,orderDate:h,orderDetailsPage:C,orderNumber:c,orderStatus:u,orderSummary:l,totalCost:m,trackPackageButtonSelector:s});r.push(E)}else j.push(z.NO_SHIPMENT_CONTAINERS)}else j.push(z.NO_ORDER_CONTAINERS)}return r}(o,i);(function(e,t){let o="Failed to extract any orders";t>0&&(o="Successful order history page extraction");const r={domain:f(),numOfOrders:t,extractionResults:j};ee(Q(e,H.TRACKING_PAGE_DATA,o,r))})(e,n.length),_.postMessageToHost(H.TRACKING_PAGE_DATA,[JSON.stringify(n),$])}(o,i,s)})).catch((e=>{q(o,e,i)}))}catch(e){q(o,e,null)}}function Y(e){return!(W&&(t(e)?(j.push(z.NO_ORDER_DATE),1):t(K)?(K=e,0):K!==e&&(j.push(z.NOT_VALID_ORDER_FOR_TRACKING_PAGE_FRE),1)))}function Z(e,o){const r=G.getTextContentFromHtmlElement(e);if(t(r)){const e=o?.getAttribute("alt")??"";return t(e)?o?.getAttribute("title")??"":e}return r}function q(e,t,o){let r=H.TRACKING_PAGE_SCRIPT_ERROR;const i=t?.message??"";t instanceof SyntaxError?r=H.TRACKING_PAGE_PARSING_ERROR:t instanceof b&&(r=H.INVALID_TRACKING_PAGE_ERROR),function(e,t,o,r){const i={domain:f(),pageUrl:A(),retailerData:JSON.stringify(r)},n=Q(e,H.TRACKING_PAGE_ERROR,o,i);n&&t&&(n.ErrorType=t),ee(n)}(e,r,i,o),_.postMessageToHost(r,[i,$])}function Q(e,t,o,r){const i={};return i.JsonData=JSON.stringify(r),i.EventType=t,i.LogLevel="Information",i.Message=o,i.ClientContext={AppInfoClientName:C.GetClientName(),JSVersion:s},e&&(i.ImpressionId=e),i}function ee(e){const t=[JSON.stringify(e)];_.postMessageToHost("LogScriptTelemetry",t)}window.checkAndGetTrackingPageData=function(e){(function(){try{return window.self!==window.top}catch(e){return!0}})()||J(e)},window.getTrackingPageData=J,window.trackingPageValidatorRuntime=_}();